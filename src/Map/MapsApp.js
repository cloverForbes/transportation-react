import  React from 'react';import  Map from './Map';import Table from '../Table/Table'import Filter from '../Filter/Filter'import {Grid, Row, Col} from 'react-bootstrap'import {rename, filterData} from '../Helpers'const headers = [    {        name: "location_name",        filter: "search",        alt: "Location"    },    {        name: "operation_state",        opts: {'2': 'Flash', '3': 'Comms Outage', '4': 'Unknown'},        display: 'icon',        filter: "toggle",        alt: "Status"    },    {        name: "operation_state_datetime",        format: "date",        alt: "Status Date"    },    {        name: "todo: math",        format: "timeH"    }];const config = {    id_match: 'signal_id'}export default class MapsApp extends React.Component{    constructor(props){        super(props);        this.state = {            position: [30.3, -97.7],            markers: [],            marker: '',            filters:[],            data: [],            opts: headers.map(item => {                return item.opts ? {name: item.name, opts: item.opts} : null            })        }    }    getPosition = position => {        let newPosition = [];        newPosition.push(Number(position.location_latitude));        newPosition.push(Number(position.location_longitude));        this.setState({            position: newPosition,            marker: position        })    }    pullData = (data, key) => {        let tmpFilters = this.state.filters;        tmpFilters[key] = data;        this.setState({            filters: tmpFilters        })    }    componentWillMount(){        if(this.props.url){            let headers = new Headers();            let myInit = {                method: 'GET',                headers: headers,                mode: 'cors',                cache: 'default'            };            fetch(this.props.url, myInit).then(function (res) {                return res;            }).then((resp) => {                return resp.json();            }).then(data => {                this.setState({                    data: data                })            })        }    }    render(){        return (            <Grid fluid={true}>                <Row>                    {headers.map((header, key) => {                        if(header.filter){                            return <Col style={{width: "25%"}} key={key}><Filter myKey={key} pullData={this.pullData} name={header.name} type={header.filter} opts={header.opts ? header.opts : ''} label={rename(header.alt)} key={key}/></Col>                        }})}                </Row>                <Row>                    <Col md={6}>                        <Table data={filterData(this.state.data, this.state.filters)}  filter={this.state.filters} getPosition={this.getPosition} headers={headers}/>                    </Col>                    <Col md={6}>                        <Map match={config.id_match} headers={headers} marker={this.state.marker}  markers={filterData(this.state.data, this.state.filters)} center={this.state.position}/>                    </Col>                </Row>            </Grid>        );    }}